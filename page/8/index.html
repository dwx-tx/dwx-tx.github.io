<!DOCTYPE html>


<html lang="en">
  

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title> dwx-tx的小天地</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css"
      />
      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
       
 
<script>
var _hmt = _hmt || [];
(function() {
	var hm = document.createElement("script");
	hm.src = "https://hm.baidu.com/hm.js?57bee4bd4703d5af3f9154ce72c6f85f";
	var s = document.getElementsByTagName("script")[0]; 
	s.parentNode.insertBefore(hm, s);
})();
</script>


      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    <link rel="alternate" href="/atom.xml" title="dwx-tx的小天地" type="application/atom+xml">
</head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/Shen-Yu/hexo-theme-ayer"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover1.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">dwx-tx的小天地</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['面朝大海，春暖花开', '愿你一生努力，一生被爱', '想要的都拥有，得不到的都释怀'],
        startDelay: 0,
        typeSpeed: 200,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  
  

<div class="notice" style="margin-top:50px">
    <i class="ri-heart-fill"></i>
    <div class="notice-content" id="broad"></div>
</div>
<script type="text/javascript">
    fetch('https://v1.hitokoto.cn')
        .then(response => response.json())
        .then(data => {
            document.getElementById("broad").innerHTML = data.hitokoto;
        })
        .catch(console.error)
</script>

<style>
    .notice {
        padding: 20px;
        border: 1px dashed #e6e6e6;
        color: #969696;
        position: relative;
        display: inline-block;
        width: 100%;
        background: #fbfbfb50;
        border-radius: 10px;
    }

    .notice i {
        float: left;
        color: #999;
        font-size: 16px;
        padding-right: 10px;
        vertical-align: middle;
        margin-top: -2px;
    }

    .notice-content {
        display: initial;
        vertical-align: middle;
    }
</style>
  
  <article class="articles">
    
    
    
    
    <article
  id="post-白鹿原观后感"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/02/02/%E7%99%BD%E9%B9%BF%E5%8E%9F%E8%A7%82%E5%90%8E%E6%84%9F/"
    >白鹿原观后感</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/02/02/%E7%99%BD%E9%B9%BF%E5%8E%9F%E8%A7%82%E5%90%8E%E6%84%9F/" class="article-date">
  <time datetime="2022-02-02T15:15:12.728Z" itemprop="datePublished">2022-02-02</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="白鹿原观后感"><a href="#白鹿原观后感" class="headerlink" title="白鹿原观后感"></a>白鹿原观后感</h1><p>说是观后感，其实是读后感。我阅读了白鹿原的原著，并没有看白鹿原电视剧。但是在阅读原著时，在我脑海中勾画出的画面使我折服。我很喜欢这本书，故事情节有趣，情节推进很快也是有历史感的。</p>
<h2 id="对白鹿原中一些事的看法"><a href="#对白鹿原中一些事的看法" class="headerlink" title="对白鹿原中一些事的看法"></a>对白鹿原中一些事的看法</h2><p>白鹿原中描写了很多事，很多事是在现在人看来是幼稚的，无聊的，但是“人不能跳过他的历史局限性来评论他。”因此也是合理的。现代人不了解的。</p>
<h3 id="看完白鹿原后的感受"><a href="#看完白鹿原后的感受" class="headerlink" title="看完白鹿原后的感受"></a>看完白鹿原后的感受</h3><p>看完白鹿原后，我对自己的历史的欠缺感到懊悔，我应该多读一些书籍来了解那个时代，那个变换莫测的时代，肯定不是一句两句话就能概括的。</p>
<h3 id="文革到底是什么样的"><a href="#文革到底是什么样的" class="headerlink" title="文革到底是什么样的"></a>文革到底是什么样的</h3><p>文革到底是什么样，我没经历过，电视剧不敢拍。因此需要阅读很多书籍来了解来完善那个时代。</p>
<p>如《兄弟》等余华作者的笔下，红卫兵们是对个人的迫害，我当时看时到觉得不以为然，只是为误会一个好人感到惋惜，只当他们是疯子。</p>
<p>但是看到《白鹿原》中，红卫兵和“造反派”们甚至产生了武力冲突，活力冲突。在《白鹿原》中，作者将他们的行为视为“夺权”。“红卫兵”们占领了县级以上的权利，而“造反派”们在农村搞破坏。</p>
<p>《白鹿原》中描写到了“红小将”们的“革命”。他们所谓的“破四旧”，打砸孔子塑像，甚至到挖掉朱先生坟墓的地步。正如朱先生生前的预知“天作孽，尚可存。人作孽，不可活”以及“还要闹到什么时候。”</p>
<p>这些在大方向上的描写使我对那段历史产生兴趣，万幸这个作家好像写了很多这方面的内容，我可以看一下。</p>
<h3 id="鬼神论"><a href="#鬼神论" class="headerlink" title="鬼神论"></a>鬼神论</h3><p>在《白鹿原》中，在“田小娥附身”以及“判官抓鬼”和“新妻遇鬼”这些地方由所谓鬼神的描写。</p>
<p>当时看到“田小娥附身后”询问母亲是否真的有此等事，没想到当年真的在她的娘家的那个村庄发生了附身的事。对于鬼神我是不信的，但是身边竟然真的出现了这种事，增加了我对这方面的兴趣，激发我解释这种现象的兴趣。在我看来，这种附身的人有几种特点：“有别人的记忆”，“声调会变”，“时而清醒时而糊涂”。在我询问过身边人后，发现每个村庄多多少少都会发生这种事，也都有所谓的“仙”来收走他们。</p>
<p>但是在《平凡的世界》中的所谓的“仙”，都是在极度无能的情况下来混口饭吃的人假装的，和《树先生》一样。</p>
<p>作家的不同描写激发了我的阅读兴趣。</p>
<p>对于“鬼神”我个人是不信服的，我认为一定是一种物理现象，这种现象一定有科学解释，只是我的学识不够，在以后在阅读更多来了解这些事。</p>
<h3 id="革命？"><a href="#革命？" class="headerlink" title="革命？"></a>革命？</h3><p>在白鹿原中，共有两次革命，一次是农革，一次是起义。</p>
<p>农革时，由各地的党员委派几名“先进”的农民到西安上了为时一个月的教育，然后他们再到各乡镇去教育其他农人进行革命。</p>
<p>矛盾在于，这些被委派去的农人在当时人的眼里都是“死皮狗”等等，事实上他们后来的举动确实让人大跌眼镜。</p>
<p>第二次是起义</p>
<p>几个为就党守门的军官竟然一瞬间就抛弃原来的政府进行“起义”，他们只是墙头草，是两边派。他们的革命性是十分低的，但是这种人竟然在“起义”后进入统治阶级，他们运用新宪法对原来的投机派进行党争。</p>
<p>原本是国民党狗腿子的白孝文竟然成了县长，只是因为这个投机派首先给党写邀功信，这种人注定是蛀虫。还堂而皇之的说自己的工作是革命工作。</p>
<p>原本是农协分子的黑娃，先是入伍，后当了土匪，后来又进了保安团，最后起义成了“副县长”，最后被白孝文通过新法给判了死刑。</p>
<p>这些虚假的投机派竟然在占据革命的成果，我相信是没来得及对他们进行清算。</p>
<p>只是当地最顶端的权利别调换了，但是那些人还是那些人，在审问黑娃时甚至没有做过多的“求证”。</p>
<p>这就是所谓的“革命”？所谓的“起义”难道就是简单的夺权？</p>
<h3 id="我们真正的革命战士"><a href="#我们真正的革命战士" class="headerlink" title="我们真正的革命战士"></a>我们真正的革命战士</h3><p>我们真正的革命战士哪里去了？</p>
<p>我能记住的书中真正的战士有“鹿兆鹏”、“白灵”、“韩裁缝”以及“鹿兆海”。</p>
<p>首先讲讲“鹿兆海”，他不是共产党，但是他是真正的军人，在中门山痛击日军，但是却死于与“剿共匪”。作者在这里揭示了蒋介石的虚伪面孔，自己的嫡系武装装备到牙齿却到西安“吃粮”，而将地方军视为“杂牌军”，却把最重要的战事最紧的关口留给他们守。在他们屡次胜利后竟把他们调离，让他们和共产党互杀，毕竟蒋介石所谓的“安内”也包括他们。</p>
<p>“鹿兆鹏”和“韩裁缝”都是真正的共产党人，在党最困难的时候都坚持了下去，他们最后都不知道结局。</p>
<p>“白灵”是十分可惜的，她在我们的根据地的一次所谓的“抓出内奸”在我看来是活生生的“党挣”下死于活埋。当时她的孩子尙小。</p>
<p>真正的战士，他们最终却因为种种原因牺牲，不知去向。活着的“投机分子”却最后苟活得到权利，多么的讽刺。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-换图片背景颜色程序(简单)"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/01/24/%E6%8D%A2%E5%9B%BE%E7%89%87%E8%83%8C%E6%99%AF%E9%A2%9C%E8%89%B2%E7%A8%8B%E5%BA%8F(%E7%AE%80%E5%8D%95)/"
    >更换证件照背景（简单不稳定）</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/01/24/%E6%8D%A2%E5%9B%BE%E7%89%87%E8%83%8C%E6%99%AF%E9%A2%9C%E8%89%B2%E7%A8%8B%E5%BA%8F(%E7%AE%80%E5%8D%95)/" class="article-date">
  <time datetime="2022-01-24T08:57:29.756Z" itemprop="datePublished">2022-01-24</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="更换证件照背景（简单不稳定）"><a href="#更换证件照背景（简单不稳定）" class="headerlink" title="更换证件照背景（简单不稳定）"></a>更换证件照背景（简单不稳定）</h1><p>某天一个高中同学拜托我帮她改变证件照的背景，但是当时我不会PS，虽然想到了下边这个程序（虽然现在看来是不行的），我因为懒就没有帮助她，现在我来介绍我的程序的解决方式。</p>
<h2 id="程序原理"><a href="#程序原理" class="headerlink" title="程序原理"></a>程序原理</h2><p><strong>程序原理：</strong></p>
<ul>
<li><p>通过改变图片的像素块的颜色改变图片的背景</p>
</li>
<li><p>图片看似是整个一片，但是其实是由一个个像素块拼接而来的</p>
<p> <img src="https://s3.bmp.ovh/imgs/2022/01/623bb94e8ea3ac56.jpg" alt="整个图片"> </p>
<p> <img src="https://s3.bmp.ovh/imgs/2022/01/e7c9ad05f448e500.jpg" alt="色素快"></p>
</li>
<li><p>获得一个个像素点的rgb值，然后修改这个值，就完成了背景的修改</p>
</li>
</ul>
<h2 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h2><p><strong>代码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.dwx;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.image.BufferedImage;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChangeColor</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> FileNotFoundException </span>&#123;</span><br><span class="line">        <span class="comment">//读取照片</span></span><br><span class="line">        File file = <span class="keyword">new</span> File(<span class="string">&quot;src/main/java/com/dwx/pic.jpg&quot;</span>);</span><br><span class="line">        <span class="comment">//新图片地址</span></span><br><span class="line">        File file1 = <span class="keyword">new</span> File(<span class="string">&quot;src/main/java/newpic.jpg&quot;</span>);</span><br><span class="line">        FileOutputStream fileOutputStream = <span class="keyword">new</span> FileOutputStream(file1);</span><br><span class="line">        <span class="comment">//通过idea的图像功能获取到的图片的背景的RGB颜色</span></span><br><span class="line">        Color colorOld = <span class="keyword">new</span> Color(<span class="number">253</span>,<span class="number">253</span>,<span class="number">255</span>);</span><br><span class="line">        <span class="comment">//希望改成的RGB颜色</span></span><br><span class="line">        Color colorNew = <span class="keyword">new</span> Color(<span class="number">250</span>, <span class="number">5</span>, <span class="number">5</span>);</span><br><span class="line">        BufferedImage read = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            read = ImageIO.read(file);</span><br><span class="line">            <span class="keyword">int</span> height = read.getHeight();</span><br><span class="line">            <span class="keyword">int</span> width = read.getWidth();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;width;i++)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;height;j++)&#123;</span><br><span class="line">                    <span class="keyword">if</span> (read.getRGB(i,j)==colorOld.getRGB())&#123;</span><br><span class="line">                        <span class="comment">//如果相等就将次点的颜色设置成我们需要的颜色</span></span><br><span class="line">                        read.setRGB(i,j,colorNew.getRGB());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//最后 把修改过的RGB再写回去</span></span><br><span class="line">            ImageIO.write(read,<span class="string">&quot;jpg&quot;</span>,fileOutputStream);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>代码步奏:</strong></p>
<ul>
<li>读取照片<code>File()</code></li>
<li>通过Image类的<code>read()</code>方法来读取这个图片中的数据 （假设产生的对象为read）</li>
<li>通过read的<code>getHeight()</code>方法获取图片的高</li>
<li>通过read的<code>getWidth()</code>方法获取图片的宽</li>
<li>通过一个for循环遍历图片的一个个像素点的并通过<code>getRGB()</code>方法获取到像素点的RGB值</li>
<li>如果该店的RGB值和我们想要换掉的值一样，那么通过<code>setRGB()</code>方法来设置该点的颜色</li>
<li>通过ImageIo的<code>write()</code>方法，把更改过得read在创建成一个新的图片</li>
</ul>
<p><strong>成品：</strong></p>
<p> <img src="https://s3.bmp.ovh/imgs/2022/01/9be20aa628c8fcb7.jpg" alt="成品"> </p>
<h2 id="局限性"><a href="#局限性" class="headerlink" title="局限性"></a>局限性</h2><p><strong>很明显这个图片有个白边 有的地方没有被修改</strong></p>
<p><strong>原因：</strong></p>
<ul>
<li>一个图片的背景不可能是纯色的，每个像素点的RGB可能都不一样</li>
<li>不同颜色之间有一个渐变，渐变是由很多不同的色素快构成的，因此无法改变边缘的颜色不同的问题</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-mybatis实现复杂查询"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/01/13/mybatis%E5%AE%9E%E7%8E%B0%E5%A4%8D%E6%9D%82%E6%9F%A5%E8%AF%A2/"
    >mybatis实现复杂查询</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/01/13/mybatis%E5%AE%9E%E7%8E%B0%E5%A4%8D%E6%9D%82%E6%9F%A5%E8%AF%A2/" class="article-date">
  <time datetime="2022-01-13T09:47:16.710Z" itemprop="datePublished">2022-01-13</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="mybatis实现复杂查询"><a href="#mybatis实现复杂查询" class="headerlink" title="mybatis实现复杂查询"></a>mybatis实现复杂查询</h1><h2 id="实现复杂查询的环境配置"><a href="#实现复杂查询的环境配置" class="headerlink" title="实现复杂查询的环境配置"></a>实现复杂查询的环境配置</h2><p>我们需要准备的东西：</p>
<ul>
<li>两个带有相联结的数据库表格（以student和teacher为例）</li>
<li>创建一个带有日志的使用lambok插件的优化配置后的java项目</li>
</ul>
<h3 id="两个数据库表格的准备"><a href="#两个数据库表格的准备" class="headerlink" title="两个数据库表格的准备"></a>两个数据库表格的准备</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `teacher` (</span><br><span class="line">  `id` <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `name` <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> teacher(`id`, `name`) <span class="keyword">VALUES</span> (<span class="number">1</span>, 秦老师); </span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `student` (</span><br><span class="line">  `id` <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `name` <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `tid` <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  KEY `fktid` (`tid`),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `fktid` <span class="keyword">FOREIGN</span> KEY (`tid`) <span class="keyword">REFERENCES</span> `teacher` (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8<span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` (`id`, `name`, `tid`) <span class="keyword">VALUES</span> (<span class="number">1</span>, 小明, <span class="number">1</span>); </span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` (`id`, `name`, `tid`) <span class="keyword">VALUES</span> (<span class="number">2</span>, 小红, <span class="number">1</span>); </span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` (`id`, `name`, `tid`) <span class="keyword">VALUES</span> (<span class="number">3</span>, 小张, <span class="number">1</span>); </span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` (`id`, `name`, `tid`) <span class="keyword">VALUES</span> (<span class="number">4</span>, 小李, <span class="number">1</span>); </span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` (`id`, `name`, `tid`) <span class="keyword">VALUES</span> (<span class="number">5</span>, 小王, <span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p><strong>在执行sql时注意：</strong>不能直接执行玩全部的sql，因为可能在执行插入操作前，还没有将表格建好。</p>
<h3 id="java项目的准备"><a href="#java项目的准备" class="headerlink" title="java项目的准备"></a>java项目的准备</h3><ul>
<li><p>导入lambok包（直接放到父项目的xml中，这样每个子项目都能直接使用了）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>设置日志（在子项目的核心配置文件中设置最简单的日志）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--这里设置了一个最基础的日志--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>编写剩余的java程序（pojo，until等）</p>
</li>
</ul>
<p><strong>需要注意的点在于：</strong></p>
<ul>
<li><p>这一次我么使用了两个实体类，因此为了体现分离的原则，我们把Mapper.xml创建到resource文件夹下，但是要求<strong>1.mapper.xml也有相同的包结构 2.mapper.xml与其对应的抽象类同名</strong></p>
<p><img src="/dwx-tx.github.io/2022/01/13/mybatis%E5%AE%9E%E7%8E%B0%E5%A4%8D%E6%9D%82%E6%9F%A5%E8%AF%A2/截屏\mybatis复杂查询环境配置01.jpg" alt="文件位置关系"></p>
</li>
<li><p>创建好的每一个xml都需要在核心配置文件中进行配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/dwx/mapper/TeacherMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/dwx/mapper/StudentMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>解释上述为何要相同的包结构：</strong>因为在生成target文件时，由于两者有相同的包结构 就会被当成是在一个包下，这就符合了我们之前要求的<code>xml文件与接口类在同一包下且同名</code>的要求</p>
<p><img src="/dwx-tx.github.io/2022/01/13/mybatis%E5%AE%9E%E7%8E%B0%E5%A4%8D%E6%9D%82%E6%9F%A5%E8%AF%A2/截屏\mybatis复杂查询环境配置02.jpg" alt="target文件结构"></p>
<h2 id="处理多对一问题"><a href="#处理多对一问题" class="headerlink" title="处理多对一问题"></a>处理多对一问题</h2><p>处理多对一问题即：从多个表中查寻相关联的数据。</p>
<p>处理方法在MySQL中有两种：</p>
<ul>
<li>子查询</li>
<li>联表查询</li>
</ul>
<p>因此在java程序中也出现两种方法：</p>
<ul>
<li>按照查询嵌套处理</li>
<li>按照结果嵌套处理</li>
</ul>
<h3 id="按照查询嵌套处理"><a href="#按照查询嵌套处理" class="headerlink" title="按照查询嵌套处理"></a>按照查询嵌套处理</h3><p><strong>按照查询嵌套处理的逻辑等同于mysql中的子查询</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--第一种使用子查询 基本原理 在查询到tid后再查询tname--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudent_Teacher&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;studentTeacherMap&quot;</span>&gt;</span></span><br><span class="line">        select * from mybatis.student1</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;studentTeacherMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--对于基本属性直接进行映射即可--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--但是对于引用参数 需要使用assocation来操作--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--这里是嵌套一个方法--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tid&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Teacher&quot;</span> <span class="attr">select</span>=<span class="string">&quot;getTeacher&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getTeacher&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Teacher&quot;</span>&gt;</span></span><br><span class="line">        select * from mybatis.teacher where id = #&#123;tid&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意点：</strong></p>
<ul>
<li>对于<code>&lt;resultmap&gt;</code>,如果是基本类型，直接使用映射即可</li>
<li>如果是引用类型使用<code>&lt;association&gt;</code></li>
<li>如果是集合类型则使用<code>&lt;collection&gt;</code></li>
</ul>
<p>原理就是在每一次查询到tid时到teacher表中查询teacher的名字</p>
<p><strong>用SQL表现为：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> student1.`id`,student1.`name` ,(<span class="keyword">SELECT</span> teacher.`name` <span class="keyword">WHERE</span> teacher.`id` <span class="operator">=</span> student1.`tid`) <span class="keyword">AS</span> teachername</span><br><span class="line"><span class="keyword">FROM</span> student1,teacher</span><br></pre></td></tr></table></figure>

<h3 id="按照结果嵌套处理"><a href="#按照结果嵌套处理" class="headerlink" title="按照结果嵌套处理"></a>按照结果嵌套处理</h3><p><strong>使用这种方法进行处理相当于sql中的联表查询</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--使用联表查询--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudent_Teacher2&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;studentTeachermap&quot;</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--下边是使用链表查询的sql--&gt;</span></span><br><span class="line">       select s.id sid,s.name sname,t.name tname</span><br><span class="line">       from student1 s,teacher t</span><br><span class="line">       where s.tid = t.id</span><br><span class="line">   <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--西边是链表查询的resultmap--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;studentTeachermap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Teacher&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;tname&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<ul>
<li>这里我们使用了大量的别名 因此在映射时，数据库一边的参数用别名表示</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.id sid,s.name sname,t.name tname</span><br><span class="line">        <span class="keyword">FROM</span> student1 s,teacher t</span><br><span class="line">        <span class="keyword">WHERE</span> s.tid <span class="operator">=</span> t.id</span><br></pre></td></tr></table></figure>

<h2 id="处理一对多问题"><a href="#处理一对多问题" class="headerlink" title="处理一对多问题"></a>处理一对多问题</h2><p><strong>环境准备：</strong>一对多，一个老师对应多个学生，因此老师的参数有一个是一个一student为类型的集合</p>
<p>而学生参数变为和数据库中参数一样。</p>
<p><strong>student类</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//编写Student实体类</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">//这里是一个联表 在java代码中 直接把链表的参数放进去</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> tid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>teacher类</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//编写Teacher的实体类</span></span><br><span class="line"><span class="comment">//这里直接使用注解来完成实体类的完善</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Student&gt; studentList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong>此时由于teacher类中使用了<code>List&lt;Student&gt;</code>因此在SQLresultmap中有所改变</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.dwx.mapper.TeacherMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getTeacher&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;teacherMap&quot;</span>&gt;</span></span><br><span class="line">        select s.id sid,s.name sname,t.name tname,t.id tid</span><br><span class="line">        from mybatis.teacher t, mybatis.student1 s</span><br><span class="line">        where s.tid = t.id</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;teacherMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Teacher&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;studentList&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;tid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stid&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong>使用<code>&lt;collection property=&quot;java中的属性&quot; foType=&quot;list的类型&quot;&gt;&lt;/collection&gt;</code>这样来给<code>List集合</code>做映射。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-mybatis介绍Lombok插件"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/01/12/mybatis%E4%BB%8B%E7%BB%8DLombok%E6%8F%92%E4%BB%B6/"
    >Lombok插件的使用</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/01/12/mybatis%E4%BB%8B%E7%BB%8DLombok%E6%8F%92%E4%BB%B6/" class="article-date">
  <time datetime="2022-01-12T12:00:22.966Z" itemprop="datePublished">2022-01-12</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="Lombok插件的使用"><a href="#Lombok插件的使用" class="headerlink" title="Lombok插件的使用"></a>Lombok插件的使用</h1><p>Lombok插件能够方便pojo类的编写（实体类的编写）</p>
<p>使用Lombok插件的使用可以代替（get/set方法、构造器、toString、hashcode等的编写）</p>
<h2 id="Lombok插件的安装"><a href="#Lombok插件的安装" class="headerlink" title="Lombok插件的安装"></a>Lombok插件的安装</h2><p><strong>安装步骤：</strong></p>
<ol>
<li><p>在IDEA中安装<code>Lombok</code>插件:(Setting-&gt;plugins-&gt;insert…)</p>
<p> <img src="https://s3.bmp.ovh/imgs/2022/01/9413303106c2d550.jpg" alt="插件安装位置"> </p>
</li>
<li><p>导入Lombok的Jar包（project Lombok）[删除<code>&lt;scope&gt;&lt;/scope&gt;</code>]</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>使用Lombok</p>
</li>
</ol>
<h3 id="使用Lombok"><a href="#使用Lombok" class="headerlink" title="使用Lombok"></a>使用Lombok</h3><p>在以前 我们都是使用<code>Alt+Ins</code>来方便编写<code>get\set方法等等</code></p>
<p> <img src="https://s3.bmp.ovh/imgs/2022/01/dd3102b4a930d7cc.jpg" alt="以前的实体类"> </p>
<p>但现在 我们仅仅使用<code>@注解</code>就能完成这个工作</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.dwx.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建与数据库映射的类</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> <img src="https://s3.bmp.ovh/imgs/2022/01/d81f21803cb7e162.jpg" alt="现在的编写方法"> </p>
<p><strong>注解的解释：</strong></p>
<ul>
<li><code>@Data：</code>代替get/set方法、无参构造、toString、hashcode、equals</li>
<li><code>@AllArgsConstructor：</code>代替有钱构造</li>
<li><code>@NoArgsConstructor：</code>代替无参构造</li>
</ul>
<p>这个插件还有很多的注解 但是最重要的只有以上三个</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-mybatis使用注解开发"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/01/12/mybatis%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91/"
    >mybatis使用注解开发</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/01/12/mybatis%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91/" class="article-date">
  <time datetime="2022-01-12T10:01:46.162Z" itemprop="datePublished">2022-01-12</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="mybatis使用注解开发"><a href="#mybatis使用注解开发" class="headerlink" title="mybatis使用注解开发"></a>mybatis使用注解开发</h1><p>在对接口就行实现时，我们既可以使用xml文件进行配置，也可以使用注解也进行配置。</p>
<p>使用注解进行配置，操作简单，但是功能也简单，复杂的操作还得使用xml配置来实现</p>
<h2 id="使用注解实现查询"><a href="#使用注解实现查询" class="headerlink" title="使用注解实现查询"></a>使用注解实现查询</h2><p><del>使用注解实现查询的底层逻辑是反射</del></p>
<p>使用注解进行查询与使用xml进行配置除了没有实现的mapper.xml文件外其他的都一致</p>
<p>**文件结构： **</p>
<p> <img src="https://s3.bmp.ovh/imgs/2022/01/16961c88f4f87838.jpg" alt="文件结构"> </p>
<p><strong>少了StudentMapper,xml文件</strong></p>
<p><strong>接口代码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">StudentMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//测试使用注解来实现查询</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from mybatis.student&quot;)</span></span><br><span class="line">    <span class="function">List&lt;student&gt; <span class="title">getStudentList</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>此时的接口直接在抽象方法上使用注解<code>@Select</code>并且在<code>()</code>里编写SQL语句</p>
<p><strong>核心配置文件代码：</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;com.dwx.mapper.StudentMapper&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>虽然没有了xml，但是还是需要进行配置，这里使用的参数是<code>class</code>自然对应我们接口类的全路径</p>
<p><strong>测试代码：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getStudentList</span><span class="params">()</span></span>&#123;</span><br><span class="line">        MyBatisUtils myBatisUtils = <span class="keyword">new</span> MyBatisUtils();</span><br><span class="line">        SqlSession sqlSession = myBatisUtils.getSqlSession();</span><br><span class="line">        StudentMapper mapper = sqlSession.getMapper(StudentMapper.class);</span><br><span class="line">        List&lt;student&gt; studentList = mapper.getStudentList();</span><br><span class="line">        <span class="keyword">for</span> (student student : studentList) &#123;</span><br><span class="line">            System.out.println(student.toString());</span><br><span class="line">        &#125;</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>测试代码和使用xml时一模一样 没有任何改变。</p>
<h2 id="自动提交事务"><a href="#自动提交事务" class="headerlink" title="自动提交事务"></a>自动提交事务</h2><p>之前我们使用的方法提交事务的方法是手动提交事务：</p>
<p><strong>until文件中的代码:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlSessionFactory.openSession();</span><br></pre></td></tr></table></figure>

<p><strong>测试类中的代码：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">InsertStudnet</span><span class="params">()</span></span>&#123;</span><br><span class="line">      MyBatisUtils myBatisUtils = <span class="keyword">new</span> MyBatisUtils();</span><br><span class="line">      SqlSession sqlSession = myBatisUtils.getSqlSession();</span><br><span class="line">      <span class="comment">//获得了sqlSession就需要进行联结获得mapper</span></span><br><span class="line">      UserDao mapper = sqlSession.getMapper(UserDao.class);</span><br><span class="line">      <span class="comment">//通过mapper对象来进行操作</span></span><br><span class="line">      mapper.InsertStudent(<span class="keyword">new</span> student(<span class="number">4</span>,<span class="string">&quot;王五&quot;</span>,<span class="string">&quot;123456&quot;</span>));</span><br><span class="line">      <span class="comment">//对于需要对数据库进行改动的如：“增删改” 都系要提交事务</span></span><br><span class="line">      sqlSession.commit();<span class="comment">//此代码就是提交事务</span></span><br><span class="line">      <span class="comment">//关闭sqlsession</span></span><br><span class="line">      sqlSession.close();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>但是现在 我们在开始SQLsession时就直接设置自动提交事务</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlsessionFactory.openSession(<span class="keyword">true</span>);</span><br></pre></td></tr></table></figure>

<p>此时就不需要<code>sqlsession.commit()</code>,每一条语句都会自动提交 但是如果sql出错还是会提交 会出现错误</p>
<h2 id="使用注解实现有参查询"><a href="#使用注解实现有参查询" class="headerlink" title="使用注解实现有参查询"></a>使用注解实现有参查询</h2><p>实现基础：<code>@Param(&quot;名字&quot;)</code>注解的使用</p>
<p>在参数前使用<code>@Param(&quot;名字&quot;)</code>这个注解，然后在<code>@Select(“sql”)</code>中使用<code>#&#123;&quot;名字&quot;&#125;</code>来获取参数。</p>
<p><strong>接口代码：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//测试使用注解实现有参查询</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from mybatis.student where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function">student <span class="title">getStudentByID</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> <span class="keyword">int</span> id)</span></span>;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong>有几个参数就在几个参数前加<code>@Param(&quot;名字&quot;)</code></p>
<h2 id="使用注解实现增加"><a href="#使用注解实现增加" class="headerlink" title="使用注解实现增加"></a>使用注解实现增加</h2><p><strong>接口代码:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//测试使用注解实现增加</span></span><br><span class="line">   <span class="meta">@Insert(&quot;insert into mybatis.student (id,name,password) values(#&#123;id&#125;,#&#123;name&#125;,#&#123;password&#125;)&quot;)</span></span><br><span class="line">   <span class="function"><span class="keyword">int</span> <span class="title">InsertStudent</span><span class="params">(student student)</span></span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong>我们这里的参数是<code>student</code>，是我创建的实体类 也就是引用类，引用类是不需要添加<code>@Params(&quot;名字&quot;)</code>的，直接使用即可。通过<code>#&#123;&quot;参数名&quot;&#125;</code>就直接获取了应用参数内部包含的参数。</p>
<p> 而且此时我们已经设置了自动提交事务，就不用在写<code>sqlsession.commit()</code>了。</p>
<h2 id="使用注解实现删除"><a href="#使用注解实现删除" class="headerlink" title="使用注解实现删除"></a>使用注解实现删除</h2><p><strong>接口代码：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//测试使用注解实现删除</span></span><br><span class="line">    <span class="meta">@Delete(&quot;delete from mybatis.student where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">DeleteStudentById</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> <span class="keyword">int</span> id)</span></span>;</span><br></pre></td></tr></table></figure>



<h2 id="使用注解实现修改"><a href="#使用注解实现修改" class="headerlink" title="使用注解实现修改"></a>使用注解实现修改</h2><p><strong>接口代码:</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//测试使用注解实现修改</span><br><span class="line">  @Update(&quot;Update mybatis.student  set name = #&#123;name&#125;,password = #&#123;password&#125; where id = #&#123;id&#125;&quot;)</span><br><span class="line">  int UpdateStudentById(@Param(&quot;id&quot;) int id,@Param(&quot;name&quot;) String name,@Param(&quot;password&quot;) String password);</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong>修改sql的书写，有几个参数就在几个参数前加<code>@Param(&quot;名字&quot;)</code></p>
<h2 id="Param-quot-名字-quot-使用的注意事项"><a href="#Param-quot-名字-quot-使用的注意事项" class="headerlink" title="@Param(&quot;名字&quot;)使用的注意事项"></a><code>@Param(&quot;名字&quot;)</code>使用的注意事项</h2><ul>
<li>有几个参数就在几个参数前加<code>@Param(&quot;名字&quot;)</code></li>
<li>基本数据类型以及String加注解，自己创造的实体类（引用数据类型）不用加注解</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-mybatis实现分页"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/01/12/mybatis%E5%AE%9E%E7%8E%B0%E5%88%86%E9%A1%B5/"
    >mybatis实现分页</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/01/12/mybatis%E5%AE%9E%E7%8E%B0%E5%88%86%E9%A1%B5/" class="article-date">
  <time datetime="2022-01-12T03:33:56.973Z" itemprop="datePublished">2022-01-12</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="mybatis实现分页"><a href="#mybatis实现分页" class="headerlink" title="mybatis实现分页"></a>mybatis实现分页</h1><p><strong>分页的意义：</strong>分页的意义在于减少了数据的处理量</p>
<p>分页可以通过一下的方式实现：</p>
<ul>
<li>sql中的<code>limit</code>实现分页</li>
<li>在java代码中使用RowBounds实现分页</li>
</ul>
<h2 id="limit实现分页"><a href="#limit实现分页" class="headerlink" title="limit实现分页"></a>limit实现分页</h2><p><strong>核心SQL语法：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> 表格名 limit startIndex,pageSize</span><br></pre></td></tr></table></figure>

<p><strong>元素分析：</strong></p>
<ul>
<li>startIndex： 指的是重哪个数据开始查询(默认是从0开始的)</li>
<li>pagesize： 指纸张的大小，可以查询到几个元素</li>
</ul>
<p><strong>回顾mybatis实现一个操作需要的步奏：</strong></p>
<ul>
<li>编写接口</li>
<li>编写Mapper.xml（主要写sql）</li>
<li>编写测试方法</li>
</ul>
<p><strong>接口代码:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">List&lt;student&gt; <span class="title">getStudentListByLimit</span><span class="params">(Map&lt;String,Object&gt; map)</span></span>;</span><br></pre></td></tr></table></figure>

<p>这里使用的万能的map作为参数</p>
<p><strong>Mapper.xml代码:</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudentListByLimit&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;StudentMap&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">       select * from mybatis.student limit #&#123;startIndex&#125;,#&#123;pageSize&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>有参数的查询必须要规定参数的类型</p>
<p>这里使用的resultMap（结果集映射）作为返回</p>
<p><strong>实现方法代码:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getStudentListByLimitTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">       MyBatisUtils myBatisUtils = <span class="keyword">new</span> MyBatisUtils();</span><br><span class="line">       SqlSession sqlSession = myBatisUtils.getSqlSession();</span><br><span class="line">       StudentMapper mapper = sqlSession.getMapper(StudentMapper.class);</span><br><span class="line">       Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">       map.put(<span class="string">&quot;startIndex&quot;</span>,<span class="number">1</span>);</span><br><span class="line">       map.put(<span class="string">&quot;pageSize&quot;</span>,<span class="number">2</span>);</span><br><span class="line">       List&lt;student&gt; studentListByLimit = mapper.getStudentListByLimit(map);</span><br><span class="line">       <span class="keyword">for</span> (student student : studentListByLimit) &#123;</span><br><span class="line">           System.out.println(student.toString());</span><br><span class="line">       &#125;</span><br><span class="line">       sqlSession.close();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>固定格式</p>
<h2 id="RowBounds实现分页"><a href="#RowBounds实现分页" class="headerlink" title="RowBounds实现分页"></a>RowBounds实现分页</h2><p><strong>这是更加服了java面向对象特点的方法，没有在sql进行操作，在测试类中进行操作</strong></p>
<p><del>这种方法已经过时</del></p>
<p>操作步奏：</p>
<ul>
<li><p>接口</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List<span class="tag">&lt;<span class="name">student</span>&gt;</span> getStudentByRowBounds();</span><br></pre></td></tr></table></figure></li>
<li><p>Mapper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudentByRowBounds&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;StudentMap&quot;</span>&gt;</span></span><br><span class="line">       select * from mybatis.student</span><br><span class="line">   <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getStudentByRowBounds</span><span class="params">()</span></span>&#123;</span><br><span class="line">        MyBatisUtils myBatisUtils = <span class="keyword">new</span> MyBatisUtils();</span><br><span class="line">        SqlSession sqlSession = myBatisUtils.getSqlSession();</span><br><span class="line">        <span class="comment">//其特点就是在sqlsession中直接进行select</span></span><br><span class="line">        <span class="comment">//第三个参数是RowBounds 因此需要创建</span></span><br><span class="line">        <span class="comment">//第一个参数是起始数，第二个参数是页面大小</span></span><br><span class="line">        RowBounds rowBounds = <span class="keyword">new</span> RowBounds(<span class="number">0</span>, <span class="number">3</span>);</span><br><span class="line">        List&lt;student&gt; students = sqlSession.selectList(<span class="string">&quot;com.dwx.mapper.StudentMapper.getStudentByRowBounds&quot;</span>, <span class="keyword">null</span>, rowBounds);</span><br><span class="line">        <span class="keyword">for</span> (student student : students) &#123;</span><br><span class="line">            System.out.println(student.toString());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>selectList()方法有三个参数</p>
<p>第一个参数是我们执行这个方法的全路径，第二个数据一般是null，第三个数据是rowBounds</p>
<p><strong>注意：</strong>我们这里并没有使用mapper，而是使用selectList，这种方法是已经放弃了的</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-mybatis日志工厂"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/01/11/mybatis%E6%97%A5%E5%BF%97%E5%B7%A5%E5%8E%82/"
    >mybatis日志工厂</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/01/11/mybatis%E6%97%A5%E5%BF%97%E5%B7%A5%E5%8E%82/" class="article-date">
  <time datetime="2022-01-11T13:02:29.150Z" itemprop="datePublished">2022-01-11</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="mybatis日志工厂"><a href="#mybatis日志工厂" class="headerlink" title="mybatis日志工厂"></a>mybatis日志工厂</h1><p>如果一个数据库操作出现了一个异常，我们需要进行排除。日志就是最好的助手。</p>
<p>在以前，我们在程序拍错时使用的是<code>sout</code>获得<code>debug</code></p>
<p>现在，我们就能够使用日志来进行排错了</p>
<p> <a target="_blank" rel="noopener" href="https://mybatis.net.cn/logging.html">日志_MyBatis中文网</a> </p>
<p>日志我们只需要了解两种：<code>STDOUT_LOGGING</code>和 <code>LOG4J</code></p>
<h2 id="STDOUT-LOGGING的使用"><a href="#STDOUT-LOGGING的使用" class="headerlink" title="STDOUT_LOGGING的使用"></a>STDOUT_LOGGING的使用</h2><p> STDOUT_LOGGING 的使用十分方便 只需要在核心配置文件（mybatis-config.xml）中配置settings就行</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>配置完就可以直接进行测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">Logging initialized using <span class="string">&#x27;class org.apache.ibatis.logging.stdout.StdOutImpl&#x27;</span> adapter.</span><br><span class="line">Class not found: org.jboss.vfs.VFS</span><br><span class="line">JBoss <span class="number">6</span> VFS API is not available in <span class="keyword">this</span> environment.</span><br><span class="line">Class not found: org.jboss.vfs.VirtualFile</span><br><span class="line">VFS implementation org.apache.ibatis.io.JBoss6VFS is not valid in <span class="keyword">this</span> environment.</span><br><span class="line">Using VFS adapter org.apache.ibatis.io.DefaultVFS</span><br><span class="line">Find JAR URL: file:/E:/java/MyBatisStudy/Mybatis03/target/classes/com/dwx/pojo</span><br><span class="line">Not a JAR: file:/E:/java/MyBatisStudy/Mybatis03/target/classes/com/dwx/pojo</span><br><span class="line">Reader entry: student.class</span><br><span class="line">Listing file:/E:/java/MyBatisStudy/Mybatis03/target/classes/com/dwx/pojo</span><br><span class="line">Find JAR URL: file:/E:/java/MyBatisStudy/Mybatis03/target/classes/com/dwx/pojo/student.class</span><br><span class="line">Not a JAR: file:/E:/java/MyBatisStudy/Mybatis03/target/classes/com/dwx/pojo/student.class</span><br><span class="line">Reader entry: ����   &lt; :</span><br><span class="line">Checking to see <span class="keyword">if</span> <span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">dwx</span>.<span class="title">pojo</span>.<span class="title">student</span> <span class="title">matches</span> <span class="title">criteria</span> [<span class="title">is</span> <span class="title">assignable</span> <span class="title">to</span> <span class="title">Object</span>]</span></span><br><span class="line"><span class="class"><span class="title">PooledDataSource</span> <span class="title">forcefully</span> <span class="title">closed</span>/<span class="title">removed</span> <span class="title">all</span> <span class="title">connections</span>.</span></span><br><span class="line"><span class="class"><span class="title">PooledDataSource</span> <span class="title">forcefully</span> <span class="title">closed</span>/<span class="title">removed</span> <span class="title">all</span> <span class="title">connections</span>.</span></span><br><span class="line"><span class="class"><span class="title">PooledDataSource</span> <span class="title">forcefully</span> <span class="title">closed</span>/<span class="title">removed</span> <span class="title">all</span> <span class="title">connections</span>.</span></span><br><span class="line"><span class="class"><span class="title">PooledDataSource</span> <span class="title">forcefully</span> <span class="title">closed</span>/<span class="title">removed</span> <span class="title">all</span> <span class="title">connections</span>.</span></span><br><span class="line"><span class="class"><span class="title">Find</span> <span class="title">JAR</span> <span class="title">URL</span>: <span class="title">file</span>:/<span class="title">E</span>:/<span class="title">java</span>/<span class="title">MyBatisStudy</span>/<span class="title">Mybatis03</span>/<span class="title">target</span>/<span class="title">test</span>-<span class="title">classes</span>/<span class="title">com</span>/<span class="title">dwx</span>/<span class="title">mapper</span></span></span><br><span class="line"><span class="class"><span class="title">Not</span> <span class="title">a</span> <span class="title">JAR</span>: <span class="title">file</span>:/<span class="title">E</span>:/<span class="title">java</span>/<span class="title">MyBatisStudy</span>/<span class="title">Mybatis03</span>/<span class="title">target</span>/<span class="title">test</span>-<span class="title">classes</span>/<span class="title">com</span>/<span class="title">dwx</span>/<span class="title">mapper</span></span></span><br><span class="line"><span class="class"><span class="title">Reader</span> <span class="title">entry</span>: <span class="title">test</span>.<span class="title">class</span></span></span><br><span class="line"><span class="class"><span class="title">Listing</span> <span class="title">file</span>:/<span class="title">E</span>:/<span class="title">java</span>/<span class="title">MyBatisStudy</span>/<span class="title">Mybatis03</span>/<span class="title">target</span>/<span class="title">test</span>-<span class="title">classes</span>/<span class="title">com</span>/<span class="title">dwx</span>/<span class="title">mapper</span></span></span><br><span class="line"><span class="class"><span class="title">Find</span> <span class="title">JAR</span> <span class="title">URL</span>: <span class="title">file</span>:/<span class="title">E</span>:/<span class="title">java</span>/<span class="title">MyBatisStudy</span>/<span class="title">Mybatis03</span>/<span class="title">target</span>/<span class="title">test</span>-<span class="title">classes</span>/<span class="title">com</span>/<span class="title">dwx</span>/<span class="title">mapper</span>/<span class="title">test</span>.<span class="title">class</span></span></span><br><span class="line"><span class="class"><span class="title">Not</span> <span class="title">a</span> <span class="title">JAR</span>: <span class="title">file</span>:/<span class="title">E</span>:/<span class="title">java</span>/<span class="title">MyBatisStudy</span>/<span class="title">Mybatis03</span>/<span class="title">target</span>/<span class="title">test</span>-<span class="title">classes</span>/<span class="title">com</span>/<span class="title">dwx</span>/<span class="title">mapper</span>/<span class="title">test</span>.<span class="title">class</span></span></span><br><span class="line"><span class="class"><span class="title">Reader</span> <span class="title">entry</span>: ����   &lt; <span class="title">U</span></span></span><br><span class="line"><span class="class"><span class="title">Find</span> <span class="title">JAR</span> <span class="title">URL</span>: <span class="title">file</span>:/<span class="title">E</span>:/<span class="title">java</span>/<span class="title">MyBatisStudy</span>/<span class="title">Mybatis03</span>/<span class="title">target</span>/<span class="title">classes</span>/<span class="title">com</span>/<span class="title">dwx</span>/<span class="title">mapper</span></span></span><br><span class="line"><span class="class"><span class="title">Not</span> <span class="title">a</span> <span class="title">JAR</span>: <span class="title">file</span>:/<span class="title">E</span>:/<span class="title">java</span>/<span class="title">MyBatisStudy</span>/<span class="title">Mybatis03</span>/<span class="title">target</span>/<span class="title">classes</span>/<span class="title">com</span>/<span class="title">dwx</span>/<span class="title">mapper</span></span></span><br><span class="line"><span class="class"><span class="title">Reader</span> <span class="title">entry</span>: <span class="title">StudentMapper</span>.<span class="title">class</span></span></span><br><span class="line"><span class="class"><span class="title">Reader</span> <span class="title">entry</span>: <span class="title">StudentMapper</span>.<span class="title">xml</span></span></span><br><span class="line"><span class="class"><span class="title">Listing</span> <span class="title">file</span>:/<span class="title">E</span>:/<span class="title">java</span>/<span class="title">MyBatisStudy</span>/<span class="title">Mybatis03</span>/<span class="title">target</span>/<span class="title">classes</span>/<span class="title">com</span>/<span class="title">dwx</span>/<span class="title">mapper</span></span></span><br><span class="line"><span class="class"><span class="title">Find</span> <span class="title">JAR</span> <span class="title">URL</span>: <span class="title">file</span>:/<span class="title">E</span>:/<span class="title">java</span>/<span class="title">MyBatisStudy</span>/<span class="title">Mybatis03</span>/<span class="title">target</span>/<span class="title">classes</span>/<span class="title">com</span>/<span class="title">dwx</span>/<span class="title">mapper</span>/<span class="title">StudentMapper</span>.<span class="title">class</span></span></span><br><span class="line"><span class="class"><span class="title">Not</span> <span class="title">a</span> <span class="title">JAR</span>: <span class="title">file</span>:/<span class="title">E</span>:/<span class="title">java</span>/<span class="title">MyBatisStudy</span>/<span class="title">Mybatis03</span>/<span class="title">target</span>/<span class="title">classes</span>/<span class="title">com</span>/<span class="title">dwx</span>/<span class="title">mapper</span>/<span class="title">StudentMapper</span>.<span class="title">class</span></span></span><br><span class="line"><span class="class"><span class="title">Reader</span> <span class="title">entry</span>: ����   &lt;   <span class="title">com</span>/<span class="title">dwx</span>/<span class="title">mapper</span>/<span class="title">StudentMapper</span>  <span class="title">java</span>/<span class="title">lang</span>/<span class="title">Object</span> <span class="title">getStudentList</span> ()<span class="title">Ljava</span>/<span class="title">util</span>/<span class="title">List</span></span>; 	Signature *()Ljava/util/List&lt;Lcom/dwx/pojo/student;&gt;; </span><br><span class="line">Find JAR URL: file:/E:/java/MyBatisStudy/Mybatis03/target/classes/com/dwx/mapper/StudentMapper.xml</span><br><span class="line">Not a JAR: file:/E:/java/MyBatisStudy/Mybatis03/target/classes/com/dwx/mapper/StudentMapper.xml</span><br><span class="line">Reader entry: &lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="line">Checking to see <span class="keyword">if</span> <span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">dwx</span>.<span class="title">mapper</span>.<span class="title">test</span> <span class="title">matches</span> <span class="title">criteria</span> [<span class="title">is</span> <span class="title">assignable</span> <span class="title">to</span> <span class="title">Object</span>]</span></span><br><span class="line"><span class="class"><span class="title">Checking</span> <span class="title">to</span> <span class="title">see</span> <span class="title">if</span> <span class="title">class</span> <span class="title">com</span>.<span class="title">dwx</span>.<span class="title">mapper</span>.<span class="title">StudentMapper</span> <span class="title">matches</span> <span class="title">criteria</span> [<span class="title">is</span> <span class="title">assignable</span> <span class="title">to</span> <span class="title">Object</span>]</span></span><br><span class="line"><span class="class"><span class="title">Opening</span> <span class="title">JDBC</span> <span class="title">Connection</span></span></span><br><span class="line"><span class="class"><span class="title">Created</span> <span class="title">connection</span> 473153915.</span></span><br><span class="line"><span class="class"><span class="title">Setting</span> <span class="title">autocommit</span> <span class="title">to</span> <span class="title">false</span> <span class="title">on</span> <span class="title">JDBC</span> <span class="title">Connection</span> [<span class="title">com</span>.<span class="title">mysql</span>.<span class="title">cj</span>.<span class="title">jdbc</span>.<span class="title">ConnectionImpl</span>@1<span class="title">c33c17b</span>]</span></span><br><span class="line"><span class="class"></span>==&gt;  Preparing: select * from mybatis.student</span><br><span class="line">==&gt; Parameters: </span><br><span class="line">&lt;==    Columns: id, name, password</span><br><span class="line">&lt;==        Row: <span class="number">1</span>, 张三, welcome</span><br><span class="line">&lt;==        Row: <span class="number">2</span>, 李四, welcome</span><br><span class="line">&lt;==        Row: <span class="number">4</span>, 王五, <span class="number">123456</span></span><br><span class="line">&lt;==        Row: <span class="number">17</span>, dwx, welcome</span><br><span class="line">&lt;==        Row: <span class="number">100</span>, 李一百, welcome</span><br><span class="line">&lt;==      Total: <span class="number">5</span></span><br><span class="line">student&#123;id=<span class="number">1</span>, name=<span class="string">&#x27;张三&#x27;</span>, pwd=<span class="string">&#x27;welcome&#x27;</span>&#125;</span><br><span class="line">student&#123;id=<span class="number">2</span>, name=<span class="string">&#x27;李四&#x27;</span>, pwd=<span class="string">&#x27;welcome&#x27;</span>&#125;</span><br><span class="line">student&#123;id=<span class="number">4</span>, name=<span class="string">&#x27;王五&#x27;</span>, pwd=<span class="string">&#x27;123456&#x27;</span>&#125;</span><br><span class="line">student&#123;id=<span class="number">17</span>, name=<span class="string">&#x27;dwx&#x27;</span>, pwd=<span class="string">&#x27;welcome&#x27;</span>&#125;</span><br><span class="line">student&#123;id=<span class="number">100</span>, name=<span class="string">&#x27;李一百&#x27;</span>, pwd=<span class="string">&#x27;welcome&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这种日志的特点在于：</p>
<ul>
<li>使用简单 能实现基本功能</li>
<li>只在控制台输出 不可以DIy 不可以控制输出格式</li>
</ul>
<h2 id="LOG4J的使用"><a href="#LOG4J的使用" class="headerlink" title="LOG4J的使用"></a>LOG4J的使用</h2><p>LOG4J应该是使用更加广泛地，但是他的使用需要进行配置，使用起来有点麻烦</p>
<p><strong>LOG4J的使用步骤：</strong></p>
<ul>
<li>导入LOG4J的依赖</li>
<li>在resource文件下新增一个配置文件(log4j.properties)</li>
<li>编写log4j配置文件（网上搜 不用记）（会在博客中写的）</li>
<li>设置log4j为日志的实现</li>
<li>使用log4j</li>
</ul>
<h3 id="导入LOG4J的依赖"><a href="#导入LOG4J的依赖" class="headerlink" title="导入LOG4J的依赖"></a>导入LOG4J的依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在子程序的pom.xml文件中配置</p>
<h3 id="在resource文件下新增一个配置文件-log4j-properties"><a href="#在resource文件下新增一个配置文件-log4j-properties" class="headerlink" title="在resource文件下新增一个配置文件(log4j.properties)"></a>在resource文件下新增一个配置文件(log4j.properties)</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># priority  :debug&lt;info&lt;warn&lt;error</span></span><br><span class="line"><span class="comment">#you cannot specify every priority with different file for log4j</span></span><br><span class="line"><span class="meta">log4j.rootLogger</span>=<span class="string">debug,stdout,info,debug,warn,error </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#console</span></span><br><span class="line"><span class="meta">log4j.appender.stdout</span>=<span class="string">org.apache.log4j.ConsoleAppender </span></span><br><span class="line"><span class="meta">log4j.appender.stdout.layout</span>=<span class="string">org.apache.log4j.PatternLayout </span></span><br><span class="line"><span class="meta">log4j.appender.stdout.layout.ConversionPattern</span>= <span class="string">[%d&#123;yyyy-MM-dd HH:mm:ss a&#125;]:%p %l%m%n</span></span><br><span class="line"><span class="comment">#info log</span></span><br><span class="line"><span class="meta">log4j.logger.info</span>=<span class="string">info</span></span><br><span class="line"><span class="meta">log4j.appender.info</span>=<span class="string">org.apache.log4j.DailyRollingFileAppender </span></span><br><span class="line"><span class="meta">log4j.appender.info.DatePattern</span>=<span class="string">&#x27;_&#x27;yyyy-MM-dd&#x27;.log&#x27;</span></span><br><span class="line"><span class="meta">log4j.appender.info.File</span>=<span class="string">./logs/log.log</span></span><br><span class="line"><span class="meta">log4j.appender.info.Append</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">log4j.appender.info.Threshold</span>=<span class="string">INFO</span></span><br><span class="line"><span class="meta">log4j.appender.info.layout</span>=<span class="string">org.apache.log4j.PatternLayout </span></span><br><span class="line"><span class="meta">log4j.appender.info.layout.ConversionPattern</span>=<span class="string">%d&#123;yyyy-MM-dd HH:mm:ss a&#125; [Thread: %t][ Class:%c &gt;&gt; Method: %l ]%n%p:%m%n</span></span><br><span class="line"><span class="comment">#debug log</span></span><br><span class="line"><span class="meta">log4j.logger.debug</span>=<span class="string">debug</span></span><br><span class="line"><span class="meta">log4j.appender.debug</span>=<span class="string">org.apache.log4j.DailyRollingFileAppender </span></span><br><span class="line"><span class="meta">log4j.appender.debug.DatePattern</span>=<span class="string">&#x27;_&#x27;yyyy-MM-dd&#x27;.log&#x27;</span></span><br><span class="line"><span class="meta">log4j.appender.debug.File</span>=<span class="string">./logs/log.log</span></span><br><span class="line"><span class="meta">log4j.appender.debug.Append</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">log4j.appender.debug.Threshold</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="meta">log4j.appender.debug.layout</span>=<span class="string">org.apache.log4j.PatternLayout </span></span><br><span class="line"><span class="meta">log4j.appender.debug.layout.ConversionPattern</span>=<span class="string">%d&#123;yyyy-MM-dd HH:mm:ss a&#125; [Thread: %t][ Class:%c &gt;&gt; Method: %l ]%n%p:%m%n</span></span><br><span class="line"><span class="comment">#warn log</span></span><br><span class="line"><span class="meta">log4j.logger.warn</span>=<span class="string">warn</span></span><br><span class="line"><span class="meta">log4j.appender.warn</span>=<span class="string">org.apache.log4j.DailyRollingFileAppender </span></span><br><span class="line"><span class="meta">log4j.appender.warn.DatePattern</span>=<span class="string">&#x27;_&#x27;yyyy-MM-dd&#x27;.log&#x27;</span></span><br><span class="line"><span class="meta">log4j.appender.warn.File</span>=<span class="string">./logs/log.log</span></span><br><span class="line"><span class="meta">log4j.appender.warn.Append</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">log4j.appender.warn.Threshold</span>=<span class="string">WARN</span></span><br><span class="line"><span class="meta">log4j.appender.warn.layout</span>=<span class="string">org.apache.log4j.PatternLayout </span></span><br><span class="line"><span class="meta">log4j.appender.warn.layout.ConversionPattern</span>=<span class="string">%d&#123;yyyy-MM-dd HH:mm:ss a&#125; [Thread: %t][ Class:%c &gt;&gt; Method: %l ]%n%p:%m%n</span></span><br><span class="line"><span class="comment">#error</span></span><br><span class="line"><span class="meta">log4j.logger.error</span>=<span class="string">error</span></span><br><span class="line"><span class="meta">log4j.appender.error</span> = <span class="string">org.apache.log4j.DailyRollingFileAppender</span></span><br><span class="line"><span class="meta">log4j.appender.error.DatePattern</span>=<span class="string">&#x27;_&#x27;yyyy-MM-dd&#x27;.log&#x27;</span></span><br><span class="line"><span class="meta">log4j.appender.error.File</span> =<span class="string">./logs/log.log</span></span><br><span class="line"><span class="meta">log4j.appender.error.Append</span> = <span class="string">true</span></span><br><span class="line"><span class="meta">log4j.appender.error.Threshold</span> = <span class="string">ERROR </span></span><br><span class="line"><span class="meta">log4j.appender.error.layout</span> = <span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.error.layout.ConversionPattern</span> = <span class="string">%d&#123;yyyy-MM-dd HH:mm:ss a&#125; [Thread: %t][ Class:%c &gt;&gt; Method: %l ]%n%p:%m%n</span></span><br></pre></td></tr></table></figure>

<h3 id="设置log4j为日志的实现"><a href="#设置log4j为日志的实现" class="headerlink" title="设置log4j为日志的实现"></a>设置log4j为日志的实现</h3><p>在核心配置文件中写</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;LOG4J&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="使用log4j"><a href="#使用log4j" class="headerlink" title="使用log4j"></a>使用log4j</h3><p>使用log4j有两种使用办法：</p>
<ul>
<li>直接使用</li>
<li>编写使用方法</li>
</ul>
<h4 id="直接使用"><a href="#直接使用" class="headerlink" title="直接使用"></a>直接使用</h4><p>在进行过以上的操作时，直接在操作类中写<code>Logger logger = Logger.getLogger(&quot;测试方法类.class&quot;)</code></p>
<p>直接使用即可</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.dwx.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.dwx.pojo.student;</span><br><span class="line"><span class="keyword">import</span> com.dwx.untils.MyBatisUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line">    <span class="comment">//注意 此处导包要导Apache的包</span></span><br><span class="line">    Logger logger = Logger.getLogger(test.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getStudentListTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//首先需要获取到 mapper</span></span><br><span class="line">        <span class="comment">//以下的操作都是固定的 不需要进行任何改变</span></span><br><span class="line">        MyBatisUtils myBatisUtils = <span class="keyword">new</span> MyBatisUtils();</span><br><span class="line">        SqlSession sqlSession = myBatisUtils.getSqlSession();</span><br><span class="line">        StudentMapper mapper = sqlSession.getMapper(StudentMapper.class);</span><br><span class="line">        List&lt;student&gt; studentList = mapper.getStudentList();</span><br><span class="line">        <span class="keyword">for</span> (student student : studentList) &#123;</span><br><span class="line">            System.out.println(student.toString());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>注意：创建Logger 导包是一定要导Apache log4j的包</p>
<p>在运行后，会产生一个logs文件，里边有log日志</p>
<p> <img src="https://s3.bmp.ovh/imgs/2022/01/a298a57348da1abc.jpg" alt="文件的产生"> </p>
<p>文件中的内容和在控制台中输出的内容一致</p>
<p> <img src="https://s3.bmp.ovh/imgs/2022/01/fdf07f460ed94621.jpg" alt="文件中的内容"> </p>
<h3 id="使用测试方法"><a href="#使用测试方法" class="headerlink" title="使用测试方法"></a>使用测试方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.dwx.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.dwx.pojo.student;</span><br><span class="line"><span class="keyword">import</span> com.dwx.untils.MyBatisUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line">    <span class="comment">//注意 此处导包要导Apache的包</span></span><br><span class="line">    Logger logger = Logger.getLogger(test.class);</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">log4jTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">        logger.info(<span class="string">&quot;###################infor#################&quot;</span>);</span><br><span class="line">        logger.debug(<span class="string">&quot;##################debug#################&quot;</span>);</span><br><span class="line">        logger.error(<span class="string">&quot;##################error##################&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这样使用的好处是，在log文件中只会出现我们设置的这几个数据</p>
<p><strong>控制台中的输出</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">com.dwx.mapper.test,log4jTest</span><br><span class="line">[2022-01-11 21:01:04 下午]:INFO com.dwx.mapper.test.log4jTest(test.java:30)###################infor#################</span><br><span class="line">[2022-01-11 21:01:04 下午]:DEBUG com.dwx.mapper.test.log4jTest(test.java:31)##################debug#################</span><br><span class="line">[2022-01-11 21:01:04 下午]:ERROR com.dwx.mapper.test.log4jTest(test.java:32)##################error##################</span><br></pre></td></tr></table></figure>

<p><strong>log.log中的输出</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">2022-01-11 21:01:04 下午 [Thread: main][ Class:com.dwx.mapper.test &gt;&gt; Method: com.dwx.mapper.test.log4jTest(test.java:30) ]</span><br><span class="line">INFO:###################infor#################</span><br><span class="line">2022-01-11 21:01:04 下午 [Thread: main][ Class:com.dwx.mapper.test &gt;&gt; Method: com.dwx.mapper.test.log4jTest(test.java:30) ]</span><br><span class="line">INFO:###################infor#################</span><br><span class="line">2022-01-11 21:01:04 下午 [Thread: main][ Class:com.dwx.mapper.test &gt;&gt; Method: com.dwx.mapper.test.log4jTest(test.java:31) ]</span><br><span class="line">DEBUG:##################debug#################</span><br><span class="line">2022-01-11 21:01:04 下午 [Thread: main][ Class:com.dwx.mapper.test &gt;&gt; Method: com.dwx.mapper.test.log4jTest(test.java:32) ]</span><br><span class="line">ERROR:##################error##################</span><br><span class="line">2022-01-11 21:01:04 下午 [Thread: main][ Class:com.dwx.mapper.test &gt;&gt; Method: com.dwx.mapper.test.log4jTest(test.java:32) ]</span><br><span class="line">ERROR:##################error##################</span><br><span class="line">2022-01-11 21:01:04 下午 [Thread: main][ Class:com.dwx.mapper.test &gt;&gt; Method: com.dwx.mapper.test.log4jTest(test.java:32) ]</span><br><span class="line">ERROR:##################error##################</span><br><span class="line">2022-01-11 21:01:04 下午 [Thread: main][ Class:com.dwx.mapper.test &gt;&gt; Method: com.dwx.mapper.test.log4jTest(test.java:32) ]</span><br><span class="line">ERROR:##################error##################</span><br><span class="line"></span><br></pre></td></tr></table></figure>

 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-mybatis结果集映射"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/01/11/mybatis%E7%BB%93%E6%9E%9C%E9%9B%86%E6%98%A0%E5%B0%84/"
    >mybatis结果集映射</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/01/11/mybatis%E7%BB%93%E6%9E%9C%E9%9B%86%E6%98%A0%E5%B0%84/" class="article-date">
  <time datetime="2022-01-11T10:52:43.981Z" itemprop="datePublished">2022-01-11</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="mybatis结果集映射"><a href="#mybatis结果集映射" class="headerlink" title="mybatis结果集映射"></a>mybatis结果集映射</h1><p>结果集映射（resultType）用来解决我们实体类中的参数名与数据库中列名不一致的问题。</p>
<p>当我们的实体类的参数名与数据库中的列名不一致是 就会发生查询错误</p>
<p> <img src="https://s3.bmp.ovh/imgs/2022/01/ea711f04c203d5fc.jpg" alt="实体类的参数名与数据库中的列名不一致"> </p>
<p>此时的查询结果</p>
<p> <img src="https://s3.bmp.ovh/imgs/2022/01/1f69f6aaa3acaa43.jpg" alt="错误的查询结果"> </p>
<p>我们可以发现 相同的查询正确，但是错误的查询的是null 查询不到</p>
<h2 id="产生错误的原因"><a href="#产生错误的原因" class="headerlink" title="产生错误的原因"></a>产生错误的原因</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudentList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;student&quot;</span>&gt;</span></span><br><span class="line">        select * from mybatis.student</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--这个SQL等共同于--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudentList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;student&quot;</span>&gt;</span></span><br><span class="line">    select id,name,password from mybatis.student</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span>    </span><br></pre></td></tr></table></figure>

<p>可以看到 在student里根本没有查询到的password参数。因此产生了错误。</p>
<p><strong>解决方法：</strong></p>
<ul>
<li>使用别名</li>
<li>结果集映射</li>
</ul>
<h2 id="使用别名"><a href="#使用别名" class="headerlink" title="使用别名"></a>使用别名</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudentList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;student&quot;</span>&gt;</span></span><br><span class="line">    select id,name,password as pwd from mybatis.student</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span>    </span><br></pre></td></tr></table></figure>

<p>这样就能直接查询了 但是这种方法是十分基础的，写的代码数量多。</p>
<h2 id="结果集映射（resultType）"><a href="#结果集映射（resultType）" class="headerlink" title="结果集映射（resultType）"></a>结果集映射（resultType）</h2><p>使用结果集映射 是在接口类的实现的mapper文件中操作，而不是和我们原来在核心配置文件中操作</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.dwx.mapper.StudentMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;StudentMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;student&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;password&quot;</span> <span class="attr">property</span>=<span class="string">&quot;pwd&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudentList&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;StudentMap&quot;</span>&gt;</span></span><br><span class="line">        select * from mybatis.student</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>元素分析：</p>
<p><strong>column：</strong>“列”，是指数据库中的字段的列名</p>
<p><strong>property：</strong>“属性”，是指实体类中的属性</p>
<p>可以把每个参数都进行映射，也可以只对实体类中的参数与数据库中列名不同的进行映射</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-mybatis配置解析之映射"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/01/11/mybatis%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90%E4%B9%8B%E6%98%A0%E5%B0%84/"
    >mybatis配置解析之映射</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/01/11/mybatis%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90%E4%B9%8B%E6%98%A0%E5%B0%84/" class="article-date">
  <time datetime="2022-01-11T08:25:04.543Z" itemprop="datePublished">2022-01-11</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="mybatis配置解析之映射"><a href="#mybatis配置解析之映射" class="headerlink" title="mybatis配置解析之映射"></a>mybatis配置解析之映射</h1><p><strong>介绍：</strong>映射（mappers）即，我们之前说的每一个接口的xml文件必须在核心配置文件中“注册”</p>
<p><strong>MapperRegistry：</strong>注册绑定我们的Mapper文件</p>
<p><strong>文章源：</strong><a target="_blank" rel="noopener" href="https://mybatis.net.cn/configuration.html#mappers">mappers（映射器）</a></p>
<p>mybatis映射我们具体使用的有三种方法：</p>
<ol>
<li>对xml文件进行映射</li>
<li>对接口类进行映射</li>
<li>对接口类所在的包进行映射</li>
</ol>
<h2 id="对xml文件进行映射"><a href="#对xml文件进行映射" class="headerlink" title="对xml文件进行映射"></a>对xml文件进行映射</h2><p><strong>即注册时使用的是Mapper接口文件的实现xml文件</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/dwx/mapper/StudentMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这种映射方式对两个文件的位置没有要求 可以在任何位置创建xml文件</p>
<h2 id="对接口类进行映射"><a href="#对接口类进行映射" class="headerlink" title="对接口类进行映射"></a>对接口类进行映射</h2><p><strong>即对接口类进行注册</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;com.dwx.mapper.StudentMapper&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这种映射方式要求：</p>
<ul>
<li>接口类和我们的实现xml文件（mapper）必须在同一个包下</li>
<li>接口类和我们的实现xml文件（mapper）必须同名</li>
</ul>
<p>否则就会报错，找不到我们的文件</p>
<p> <img src="https://s3.bmp.ovh/imgs/2022/01/63e0c40d6e3e9b4a.jpg" alt="文件的位置"> </p>
<h2 id="对接口类所在的包进行映射"><a href="#对接口类所在的包进行映射" class="headerlink" title="对接口类所在的包进行映射"></a>对接口类所在的包进行映射</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.dwx.mapper&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这种映射方式要求：</p>
<ul>
<li>接口类和我们的实现xml文件（mapper）必须在同一个包下</li>
<li>接口类和我们的实现xml文件（mapper）必须同名</li>
</ul>
<p>否则就会报错，找不到我们的文件</p>
<p> <img src="https://s3.bmp.ovh/imgs/2022/01/63e0c40d6e3e9b4a.jpg" alt="文件的位置"> </p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-mybatis配置之别名"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/01/10/mybatis%E9%85%8D%E7%BD%AE%E4%B9%8B%E5%88%AB%E5%90%8D/"
    >mybatis配置解析之别名</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/01/10/mybatis%E9%85%8D%E7%BD%AE%E4%B9%8B%E5%88%AB%E5%90%8D/" class="article-date">
  <time datetime="2022-01-10T12:58:08.101Z" itemprop="datePublished">2022-01-10</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="mybatis配置之别名"><a href="#mybatis配置之别名" class="headerlink" title="mybatis配置之别名"></a>mybatis配置之别名</h1><p> <a target="_blank" rel="noopener" href="https://mybatis.net.cn/configuration.html#typeAliases">配置_MyBatis中文网</a> </p>
<h2 id="别名"><a href="#别名" class="headerlink" title="别名"></a>别名</h2><p><strong>使用别名的意义：</strong>能够在xml使用用java中编写的实体类是降低编写代码的冗余性。（全部路径的包名可以不用写了）</p>
<p>实际上就是给java中的实体类编写一个短的名字</p>
<h2 id="使用别名的方法"><a href="#使用别名的方法" class="headerlink" title="使用别名的方法"></a>使用别名的方法</h2><p><strong>命名别名</strong>可以大致分为两个方法：一、把一个个实体类命名成别名。二、直接引入pojo包 把这个包中的所有实体类都命名成别名；</p>
<p><strong>使用别名的方法：</strong>在核心配置文件（mybatis-config.xml）中配置，在这个核心文件中配置过得xml文件中直接使用。</p>
<p>在配置别名时，需要注意的是。这个xml配置文件的标签的使用有先后顺序，不能随意位置放置。</p>
<h3 id="将一个个实体类命名成别名"><a href="#将一个个实体类命名成别名" class="headerlink" title="将一个个实体类命名成别名"></a>将一个个实体类命名成别名</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--在这里将我们创建的实体类进行别名--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--在核心配置文件中配置别名--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--在下边mapper中注册的xml中就能使用这个别名了--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--这种方法是一下子别名一个实体类--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">&quot;Student&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.dwx.pojo.student&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>上述是xml中的配置</p>
<p>在配置好的xml中可以直接使用：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.dwx.mapper.StudentMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudentList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">        select * from mybatis.student</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这种方法的特点：</p>
<ul>
<li>在实体类少时可以使用（方便），但是实体类多了以后就十分麻烦</li>
<li>别名可以DIY 可以在alias后随便设置别名</li>
</ul>
<h3 id="将实体类的包直接命名成别名"><a href="#将实体类的包直接命名成别名" class="headerlink" title="将实体类的包直接命名成别名"></a>将实体类的包直接命名成别名</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--也可以直接一下子导入一个实体类的包 这样使用实体类的类名（首字母小写）作为它的别名--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.dwx.pojo&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这种情况下，在配置好的xml直接使用你引入的这个包中的实体类的类名（首字母小写）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.dwx.mapper.StudentMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudentList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;student&quot;</span>&gt;</span></span><br><span class="line">        select * from mybatis.student</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这种方式的特点：</p>
<ul>
<li>在实体类多时使用十分方便</li>
<li>别名不能DIY——为实体类的类名（首字母小写）</li>
</ul>
<p><strong>但是说这种方法不能DIY别名是十分不严谨的，如果和注解结合使用就能实现类名的DIY</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Alias(&quot;hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//无参构造</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">student</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//有参构造</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">student</span><span class="params">(<span class="keyword">int</span> id, String name, String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//get和set方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当实体类使用<code>Alias(&quot;别名&quot;)</code>后，就能在引入这个实体类所在的包后使用这个别名作为别名使用</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.dwx.mapper.StudentMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudentList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;hello&quot;</span>&gt;</span></span><br><span class="line">        select * from mybatis.student</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/7/">上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" href="/page/9/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2023
        <i class="ri-heart-fill heart_icon"></i> dwx
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="dwx-tx的小天地"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>